<div class="perfil container-fluid px-3 px-md-4 py-4" style="margin-top: 50px;">
  <div class="row g-4 align-items-stretch">

    <!-- Encabezado -->
    <div class="col-12">
      <div class="barra d-flex flex-wrap align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-3">
          <div class="avatar">
            <img [src]="showImage || 'assets/img/avatar-placeholder.png'" alt="Foto de perfil">
          </div>
          <div>
            <div class="nombre">
              {{ showNombre }} {{ showApellidoPaterno || ' ' }} {{ showApellidoMaterno || ' ' }}
            </div>
            <div class="mini d-flex align-items-center gap-2">
              <span class="pill pill-rol">{{ showRol }}</span>
              <span class="pill pill-ok">Activo</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- INFO UNIFICADA -->
    <div class="col-12">
      <div class="tarjeta ficha info-unificada">
        <div class="barra-titulo">
      <div class="t-left">
        <span class="t-dot">i</span>
        <span class="t-text">Información del Usuario</span>
      </div>
      <div class="t-right">
        <span class="chip chip-ok">Activo</span>
        <span class="chip chip-role">{{ showRol }}</span>
      </div>
    </div>

        <div class="row g-3 iu-grid">
          <div class="col-12 col-md-6 col-lg-4">
            <div class="iu-item">
              <div class="iu-icon">
                <i class="fa fa-calendar-check"></i>
              </div>
              <div class="iu-body">
                <div class="iu-label">Miembro desde</div>
                <div class="iu-value">{{ showCreacion || ' ' }}</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <div class="iu-item">
              <div class="iu-icon">
                <i class="fa fa-clock"></i>
              </div>
              <div class="iu-body">
                <div class="iu-label">Último acceso</div>
                <div class="iu-value">{{ ultimoLogin || ' ' }}</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <div class="iu-item">
              <div class="iu-icon">
                <i class="fa fa-envelope"></i>
              </div>
              <div class="iu-body">
                <div class="iu-label">Correo</div>
                <div class="iu-value">{{ showCorreo }}</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <div class="iu-item">
              <div class="iu-icon">
                <i class="fa fa-phone"></i>
              </div>
              <div class="iu-body">
                <div class="iu-label">Teléfono</div>
                <div class="iu-value">{{ showTelefono }}</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <div class="iu-item">
              <div class="iu-icon">
                <i class="fa fa-id-badge"></i>
              </div>
              <div class="iu-body">
                <div class="iu-label">Rol</div>
                <div class="iu-value">{{ showRol }}</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <div class="iu-item">
              <div class="iu-icon">
                <i class="fa fa-shield-alt"></i>
              </div>
              <div class="iu-body">
                <div class="iu-label">Seguridad</div>
                <div class="iu-value">Alta</div>
              </div>
            </div>
          </div>
        </div>

        <div class="iu-footer">
          <div class="chip chip-soft">Miembro</div>
          <div class="chip chip-soft">Administrador</div>
        </div>
      </div>
    </div>


    <!-- CONTRASEÑA -->
    <div class="col-12">
      <div class="tarjeta pasos">
        <div class="pasos-head">
          <div class="step"><span>1</span> Actual</div>
          <div class="divider"></div>
          <div class="step"><span>2</span> Nueva</div>
          <div class="divider"></div>
          <div class="step"><span>3</span> Confirmar</div>
        </div>

        <form [formGroup]="passwordForm" (ngSubmit)="actualizarContrasena()" novalidate>
          <div class="row g-3 p-3 p-md-4">
            <div class="col-12 col-lg-4">
              <div class="in-wrap">
                <input id="cp" [type]="show.curr ? 'text' : 'password'" formControlName="passwordActual"
                  class="form-control neo" placeholder="••••••••" autocomplete="current-password" />
                <button type="button" class="toggle" (click)="show.curr = !show.curr" aria-label="Mostrar/ocultar">
                  <i class="fa" [class.fa-eye]="!show.curr" [class.fa-eye-slash]="show.curr"></i>
                </button>
              </div>
            </div>

            <div class="col-12 col-lg-4">
              <div class="in-wrap">
                <input id="np" [type]="show.neu ? 'text' : 'password'" formControlName="passwordNueva"
                  class="form-control neo" (input)="onPasswordInput()" placeholder="Mínimo 8 caracteres"
                  autocomplete="new-password" />
                <button type="button" class="toggle" (click)="show.neu = !show.neu" aria-label="Mostrar/ocultar">
                  <i class="fa" [class.fa-eye]="!show.neu" [class.fa-eye-slash]="show.neu"></i>
                </button>
                <small class="hint" [@hintSwap]="hintVersion" [ngClass]="passwordStrengthColor" aria-live="polite"
                  role="status">
                  {{ passwordStrengthMsg }}
                </small>
              </div>
            </div>

            <div class="col-12 col-lg-4">
              <div class="in-wrap">
                <input id="cf" [type]="show.conf ? 'text' : 'password'" formControlName="passwordNuevaConfirmacion"
                  class="form-control neo" (input)="updateConfirmState()" placeholder="Repite la contraseña"
                  autocomplete="new-password" />
                <button type="button" class="toggle" (click)="show.conf = !show.conf" aria-label="Mostrar/ocultar">
                  <i class="fa" [class.fa-eye]="!show.conf" [class.fa-eye-slash]="show.conf"></i>
                </button>
                <small class="hint" [ngClass]="confirmState" *ngIf="confirmMsg">{{ confirmMsg }}</small>
              </div>
            </div>

            <div class="col-12 d-flex flex-wrap gap-2 mt-3">
              <button class="btn btn-primario" type="submit">Actualizar contraseña</button>
              <button class="btn btn-lite" type="button" (click)="onResetPassword()"
                [disabled]="loading">Cancelar</button>
            </div>
          </div>
        </form>

      </div>
    </div>

  </div>
</div>